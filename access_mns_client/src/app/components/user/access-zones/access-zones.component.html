<div class="access-zones-container">
  <div class="dashboard-header">
    <h1>
      <mat-icon class="dashboard-icon">place</mat-icon>
      Accès & Zones
    </h1>
    <p class="dashboard-subtitle">Consultez vos zones accessibles et les badgeuses autorisées</p>
  </div>

  <div class="dashboard-grid">
    <!-- Accessible Zones Section -->
    <div class="zones-section">
      <h2 class="section-title">
        <mat-icon>room</mat-icon>
        Zones Accessibles
      </h2>

      <div *ngIf="getAccessibleZones().length > 0; else noZones" class="zones-grid">
        <mat-card *ngFor="let zone of getAccessibleZones()" class="dashboard-card zone-card">
          <mat-card-header>
            <div mat-card-avatar class="card-avatar zone-avatar">
              <mat-icon>room</mat-icon>
            </div>
            <mat-card-title>{{ zone.nom_zone }}</mat-card-title>
            <mat-card-subtitle>Zone d'accès autorisée</mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <div class="info-grid">
              <div class="info-item" *ngIf="zone.description">
                <strong>Description:</strong>
                <span>{{ zone.description }}</span>
              </div>
              <div class="info-item" *ngIf="zone.capacite">
                <strong>Capacité:</strong>
                <span>{{ zone.capacite }} personnes</span>
              </div>
            </div>
          </mat-card-content>
        </mat-card>
      </div>

      <ng-template #noZones>
        <mat-card class="dashboard-card no-access-card">
          <mat-card-header>
            <div mat-card-avatar class="card-avatar no-access-avatar">
              <mat-icon>block</mat-icon>
            </div>
            <mat-card-title>Aucune Zone Accessible</mat-card-title>
            <mat-card-subtitle>Pas d'accès défini</mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <p>Aucune zone n'est actuellement accessible avec votre profil.</p>
          </mat-card-content>
        </mat-card>
      </ng-template>
    </div>

    <!-- Badge Readers Section -->
    <div class="badgeuses-section">
      <h2 class="section-title">
        <mat-icon>nfc</mat-icon>
        Badgeuses Autorisées
      </h2>

      <div *ngIf="getAuthorizedBadgeReaders().length > 0; else noBadgeReaders" class="badgeuses-grid">
        <mat-card *ngFor="let badgeuse of getAuthorizedBadgeReaders()" class="dashboard-card badgeuse-card">
          <mat-card-header>
            <div mat-card-avatar class="card-avatar badgeuse-avatar">
              <mat-icon>sensor_door</mat-icon>
            </div>
            <mat-card-title>{{ badgeuse.reference }}</mat-card-title>
            <mat-card-subtitle>Installée le {{ formatDate(badgeuse.date_installation) }}</mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <div class="zones-accessible">
              <strong>Zones accessibles :</strong>
              <mat-chip-listbox>
                <mat-chip *ngFor="let zone of badgeuse.zones_accessibles">{{ zone.nom_zone }}</mat-chip>
              </mat-chip-listbox>
            </div>
          </mat-card-content>
        </mat-card>
      </div>

      <ng-template #noBadgeReaders>
        <mat-card class="dashboard-card no-badgeuse-card">
          <mat-card-header>
            <div mat-card-avatar class="card-avatar no-badgeuse-avatar">
              <mat-icon>block</mat-icon>
            </div>
            <mat-card-title>Aucune Badgeuse Autorisée</mat-card-title>
            <mat-card-subtitle>Pas de badgeuse configurée</mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <p>Aucune badgeuse n'est actuellement autorisée pour votre profil.</p>
          </mat-card-content>
        </mat-card>
      </ng-template>
    </div>
  </div>
</div>
