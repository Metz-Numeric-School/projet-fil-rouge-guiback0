{% extends 'base.html.twig' %}

{% block title %}Accès index
{% endblock %}

{% block body %}
	<div class="card">
		<div class="card-header d-flex justify-content-between align-items-center">
			<h5 class="mb-0">
				<i class="bi bi-key"></i>
				Accès ({{ acces|length }})
			</h5>
			<a href="{{ path('app_acces_new') }}" class="btn btn-sm btn-outline-light">
				<i class="bi bi-plus-circle"></i>
				Nouvel accès
			</a>
		</div>
		{% if acces|length > 0 %}
			<div class="table-responsive">
				<table class="table table-hover">
					<thead>
						<tr>
							<th>Id</th>
							<th>Nom d'accès</th>
							<th>Date installation</th>
							<th>Actions</th>
						</tr>
					</thead>
					<tbody>
						{% for acce in acces %}
							<tr class="clickable-row" data-href="{{ path('app_acces_show', {'id': acce.id}) }}">
								<td>{{ acce.id }}</td>
								<td>{{ acce.nomAcces }}</td>
								<td>{{ acce.dateInstallation ? acce.dateInstallation|date('d/m/Y H:i') : '' }}</td>
								<td>
									<div class="btn-group" role="group">
										<a href="{{ path('app_acces_show', {'id': acce.id}) }}" class="btn btn-sm btn-primary" title="Voir">
											<i class="bi bi-eye"></i>
										</a>
										<a href="{{ path('app_acces_edit', {'id': acce.id}) }}" class="btn btn-sm btn-outline-secondary" title="Modifier">
											<i class="bi bi-pencil"></i>
										</a>
									</div>
								</td>
							</tr>
						{% endfor %}
					</tbody>
				</table>
			</div>
		{% else %}
			<div class="text-center py-4">
				<i class="bi bi-key text-muted" style="font-size: 3rem;"></i>
				<p class="text-muted mt-2">Aucun accès</p>
				<a href="{{ path('app_acces_new') }}" class="btn btn-primary">
					<i class="bi bi-plus"></i>
					Créer un accès
				</a>
			</div>
		{% endif %}
	</div>
{% endblock %}

{% block stylesheets %}
	<style>
		.clickable-row {
			cursor: pointer;
			transition: background-color 0.2s ease;
		}
		.clickable-row:hover {
			background-color: rgba(13, 110, 253, 0.1) !important;
		}
	</style>
{% endblock %}

{% block javascripts %}
	<script>
		document.addEventListener('DOMContentLoaded', () => { // Make table rows clickable
document.querySelectorAll('.clickable-row').forEach(row => {
row.addEventListener('click', (e) => { // Don't trigger if clicking on buttons or links
if (e.target.closest('a, button')) {
return;
}
window.location.href = row.dataset.href;
});
});
});
	</script>
{% endblock %}
