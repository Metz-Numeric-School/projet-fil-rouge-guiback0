<!DOCTYPE html>
<html lang="fr">
	<head>
		<meta charset="UTF-8">
		<title>Connexion - ACCESS MNS MANAGER</title>

		<!-- Bootstrap CSS -->
		<link
		href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
		<!-- Bootstrap Icons -->
		<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">

		<style>:root
		{
			--primary-color: #FF5D2D;
			--secondary-color: #25176E;
			--light-bg: #f8f9fa;
			--dark-text: #333;
			--gradient: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
		}

		body {
			background: white;
			min-height: 100vh;
			font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
		}

		.login-container {
			min-height: 100vh;
			display: flex;
			align-items: center;
			justify-content: center;
			padding: 20px;
		}

		.login-card {
			background: white;
			border-radius: 20px;
			box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
			overflow: hidden;
			max-width: 900px;
			width: 100%;
			min-height: 480px;
		}

		.login-header {
			background: var(--gradient);
			color: white;
			padding: 30px 25px;
			text-align: center;
			position: relative;
			overflow: hidden;
			height: 100%;
			display: flex;
			flex-direction: column;
			justify-content: center;
		}

		.login-header h1 {
			font-size: 2.2rem;
			font-weight: 700;
			margin-bottom: 10px;
			position: relative;
			z-index: 1;
		}

		.login-header .subtitle {
			font-size: 1.3rem;
			opacity: 0.9;
			position: relative;
			z-index: 1;
			margin-bottom: 30px;
		}

		.brand-icon {
			font-size: 3.5rem;
			margin-bottom: 20px;
			opacity: 0.9;
		}

		.login-form {
			padding: 30px;
			height: 100%;
			display: flex;
			flex-direction: column;
			justify-content: center;
			overflow-y: auto;
		}

		.form-floating {
			margin-bottom: 25px;
		}

		.form-floating .form-control {
			border: 2px solid #e9ecef;
			border-radius: 12px;
			height: 65px;
			font-size: 1.1rem;
			padding: 20px 15px;
			transition: all 0.3s ease;
		}

		.form-floating label {
			color: #6c757d;
			font-weight: 500;
			font-size: 1rem;
		}

		.btn-login {
			background: var(--gradient);
			border: none;
			border-radius: 12px;
			padding: 18px 30px;
			font-size: 1.2rem;
			font-weight: 600;
			color: white;
			width: 100%;
			transition: all 0.3s ease;
			position: relative;
			overflow: hidden;
		}

		.remember-me {
			display: flex;
			align-items: center;
			margin-bottom: 30px;
		}

		.form-check-input {
			border-radius: 6px;
			border: 2px solid #e9ecef;
			width: 22px;
			height: 22px;
		}

		.form-check-label {
			font-weight: 500;
			color: var(--dark-text);
			margin-left: 12px;
			font-size: 1rem;
		}

		.alert {
			border-radius: 12px;
			border: none;
			padding: 18px 25px;
			margin-bottom: 30px;
			font-size: 1rem;
		}

		.divider {
			display: flex;
			align-items: center;
			margin: 35px 0;
			color: #6c757d;
		}

		.divider span {
			padding: 0 25px;
			font-weight: 500;
			font-size: 1rem;
		}

		.footer-links {
			text-align: center;
			margin-top: 35px;
		}

		.footer-links a {
			color: var(--secondary-color);
			text-decoration: none;
			font-weight: 500;
			transition: color 0.3s ease;
			font-size: 1rem;
		}

		.features-list {
			list-style: none;
			padding: 0;
			margin-top: 25px;
		}

		.features-list li {
			padding: 8px 0;
			color: rgba(255, 255, 255, 0.9);
			display: flex;
			align-items: center;
			font-size: 0.95rem;
		}

		.features-list li i {
			margin-right: 15px;
			color: rgba(255, 255, 255, 0.7);
			font-size: 1.2rem;
		}

		.form-floating-with-icon {
			position: relative;
		}

		.password-toggle {
			position: absolute;
			right: 18px;
			top: 50%;
			transform: translateY(-50%);
			cursor: pointer;
			color: #6c757d;
			z-index: 10;
			font-size: 1.2rem;
			transition: color 0.3s ease;
		}

		.password-toggle:hover {
			color: var(--primary-color);
		}

		.form-check-input:checked {
			background-color: var(--primary-color);
			border-color: var(--primary-color);
		}

		.alert-danger {
			background-color: #f8d7da;
			color: #721c24;
			border-left: 4px solid #dc3545;
		}

		.divider::before,
		.divider::after {
			content: '';
			flex: 1;
			height: 1px;
			background: #e9ecef;
		}

		.footer-links a:hover {
			color: var(--primary-color);
		}

		.btn-login::before {
			content: '';
			position: absolute;
			top: 0;
			left: -100%;
			width: 100%;
			height: 100%;
			background: rgba(255, 255, 255, 0.2);
			transition: left 0.5s ease;
		}

		.btn-login:hover::before {
			left: 100%;
		}

		.btn-login:hover {
			transform: translateY(-2px);
			box-shadow: 0 15px 35px rgba(255, 93, 45, 0.4);
		}

		.form-floating .form-control:focus {
			border-color: var(--primary-color);
			box-shadow: 0 0 0 0.2rem rgba(255, 93, 45, 0.25);
		}

		.loading {
			display: none;
		}

		.btn-login.loading {
			pointer-events: none;
		}

		.btn-login.loading .loading {
			display: inline-block;
		}

		.btn-login.loading .btn-text {
			display: none;
		}

		@keyframes spin {
			0% {
				transform: rotate(0deg);
			}
			100% {
				transform: rotate(360deg);
			}
		}
	</style>
</head>
<body>
	<div class="login-container">
		<div class="login-card">
			<div
				class="row g-0">
				<!-- Left side - Branding -->
				<div class="col-5">
					<div class="login-header h-100">
						<div class="brand-icon">
							<i class="bi bi-shield-lock-fill"></i>
						</div>
						<h1>ACCESS MNS</h1>
						<p class="subtitle">MANAGER</p>

						<ul class="features-list">
							<li>
								<i class="bi bi-people"></i>
								Gestion des utilisateurs</li>
							<li>
								<i class="bi bi-building"></i>
								Gestion des organisations</li>
							<li>
								<i class="bi bi-key"></i>
								Contrôle d'accès</li>
							<li>
								<i class="bi bi-clock"></i>
								Suivi du temps de travail</li>
							<li>
								<i class="bi bi-shield-check"></i>
								Alertes sécurisées</li>
						</ul>
					</div>
				</div>

				<!-- Right side - Login Form -->
				<div class="col-7">
					<div class="login-form">
						<div class="text-center mb-5">
							<h2 class="h2 mb-3" style="color: var(--secondary-color); font-weight: 700;">
								Connexion Super Admin
							</h2>
							<p class="text-muted fs-5">
								Accédez à votre tableau de bord administrateur
								{% if environment is defined %}
									<br><small class="text-muted">Vous êtes actuellement dans l'environement de
										<span class="badge {% if environment == 'prod' %}bg-danger{% elseif environment == 'dev' %}bg-warning text-dark{% else %}bg-info{% endif %}">
											{{ environment|upper }}
										</span>
									</small>
								{% endif %}
							</p>
						</div>

						<!-- Error Alert -->
						{% if error %}
							<div class="alert alert-danger" id="errorAlert">
								<i class="bi bi-exclamation-triangle me-2"></i>
								<span id="errorMessage">Identifiants Invalides</span>
							</div>
						{% endif %}

						<form id="loginForm" method="post" action="{{ path('app_login') }}">
							<div class="form-floating">
								<input type="email" class="form-control" id="email" name="_username" placeholder="Email" required value="{{ last_username }}">
								<label for="email">
									<i class="bi bi-envelope me-2"></i>Adresse email
								</label>
							</div>

							<div class="form-floating-with-icon">
								<div class="form-floating">
									<input type="password" class="form-control" id="password" name="_password" placeholder="Mot de passe" required>
									<label for="password">
										<i class="bi bi-lock me-2"></i>Mot de passe
									</label>
								</div>
								<i class="bi bi-eye password-toggle" id="passwordToggle"></i>
							</div>

							<div class="remember-me">
								<input type="checkbox" class="form-check-input" id="remember" name="_remember_me">
								<label class="form-check-label" for="remember">
									Se souvenir de moi
								</label>
							</div>

							<button type="submit" class="btn btn-login">
								<span class="btn-text">
									<i class="bi bi-box-arrow-in-right me-2"></i>Se connecter
								</span>
								<span class="loading">
									<i class="bi bi-arrow-clockwise me-2" style="animation: spin 1s linear infinite;"></i>Connexion...
								</span>
							</button>

							<input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">
						</form>

						<div class="divider">
							<span>Besoin d'aide ?</span>
						</div>

						<div class="footer-links">
							<a href="#" class="me-3">
								<i class="bi bi-question-circle me-1"></i>Support technique
							</a>
							<a href="#">
								<i class="bi bi-info-circle me-1"></i>Documentation
							</a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- Bootstrap JS -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

	<script>
		document.addEventListener('DOMContentLoaded', function () {
const passwordToggle = document.getElementById('passwordToggle');
const passwordInput = document.getElementById('password');

if (passwordToggle && passwordInput) {
passwordToggle.addEventListener('click', function () {
if (passwordInput.type === 'password') {
passwordInput.type = 'text';
this.classList.remove('bi-eye');
this.classList.add('bi-eye-slash');
} else {
passwordInput.type = 'password';
this.classList.remove('bi-eye-slash');
this.classList.add('bi-eye');
}
});
}

// Form submission with loading state
const loginForm = document.getElementById('loginForm');
const loginButton = document.querySelector('.btn-login');

if (loginForm && loginButton) {
loginForm.addEventListener('submit', function (e) {
loginButton.classList.add('loading');
loginButton.disabled = true;
});
}

// Auto-focus on email input
const emailInput = document.getElementById('email');
if (emailInput) {
emailInput.focus();
}
});
	</script>
</body>
</html>
